(this["webpackJsonpattendr-dashboard"]=this["webpackJsonpattendr-dashboard"]||[]).push([[0],{43:function(e,t,a){e.exports=a(72)},69:function(e,t,a){e.exports=a.p+"static/media/rguAccelerator.6e03a1a3.jpg"},70:function(e,t,a){e.exports=a.p+"static/media/attendr-logo-primary.51a2cc64.png"},72:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(14),c=a.n(l),o=a(42),s=a(15),i=a(12),u=a(16),m=a(79),d=a(80),E=a(81),f=a(82),p=a(84),b=a(76),h=a(19),v=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){l(JSON.parse(localStorage.getItem("sessions")))}),[]);var c={columns:[{label:"ID",field:"event_id",sort:"asc"},{label:"Date",field:"event_date",sort:"asc"},{label:"Room",field:"room",sort:"asc"},{label:"Module",field:"module",sort:"asc"},{label:"Action",field:"action",sort:"asc"}],rows:a.map((function(e){return{event_id:e.event_id,event_date:e.event_date,room:e.room.uniqueName,module:r.a.createElement("span",null,r.a.createElement(b.a,{variant:"primary"},e.module.uniqueName)," / ",e.module.name),action:r.a.createElement(i.b,{to:"/attendance/"+e.id},"View Attendance")}}))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Sessions"),r.a.createElement(h.c,{striped:!0,bordered:!0,hover:!0,data:c,noBottomColumns:!0}))},g=a(77),S=a(78),O=a(83),j=a(41),k=a.n(j),N=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(s.a)(c,2),m=o[0],d=o[1],E=Object(n.useState)({present:0,absent:0,perPresent:0,perAbsent:0}),f=Object(s.a)(E,2),p=f[0],v=f[1],j=Object(u.g)().id;Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("sessions")).filter((function(e){return e.id===j}))[0];l(e);var t=e.attendance.items;d(t);var a=t.map((function(e){return e.mark_id})).reduce((function(e,t){return e+t})),n=t.length;v({present:a,absent:n-a})}),[j]);var N={columns:[{label:"Student ID",field:"studentUniqueName"},{label:"Student name",field:"studentName"},{label:"Mark",field:"mark"},{label:"Marked at",field:"markedAt"}],rows:m.map((function(e){return{studentUniqueName:e.studentUniqueName,studentName:e.studentName,mark:0===e.mark_id?r.a.createElement(b.a,{variant:"danger"},e.mark):r.a.createElement(b.a,{variant:"success"},e.mark),markedAt:0===e.mark_id?null:new Date(e.markedAt).toLocaleString()}}))};return r.a.createElement("div",null,r.a.createElement(i.b,{to:"/sessions/"},"Go back"),r.a.createElement("h1",null,"Attendance"),r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Room"),r.a.createElement("th",null,"Module"))),r.a.createElement("tbody",null,null!=a?r.a.createElement("tr",null,r.a.createElement("td",null,a.event_id),r.a.createElement("td",null,a.event_date),r.a.createElement("td",null,a.room.uniqueName),r.a.createElement("td",null,r.a.createElement(b.a,{variant:"primary"},a.module.uniqueName)," / ",a.module.name)):null)),r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Header,null,"Absenteeism rate"),r.a.createElement(O.a.Body,null,r.a.createElement(k.a,{animate:!0,animationDuration:500,animationEasing:"ease-out",data:[{title:"present",value:p.present,color:"green"},{title:"absent",value:p.absent,color:"red"}],label:function(e){var t=e.data,a=e.dataIndex;if("present"===t[a].title){if(t[a].percentage>0)return Math.round(t[a].percentage)+"%"}else if(t[a].percentage>0)return Math.round(t[a].percentage)+"%"},labelPosition:50,labelStyle:{fill:"white",fontSize:"10px"},style:{height:"200px"}})),r.a.createElement(O.a.Footer,{className:"d-flex justify-content-around"},r.a.createElement(b.a,{style:{fontSize:"20px"},variant:"success"},p.present," present"),r.a.createElement(b.a,{style:{fontSize:"20px"},variant:"danger"},p.absent," absent"),r.a.createElement(b.a,{style:{fontSize:"20px"},variant:"primary"},p.absent+p.present," total")))),r.a.createElement(h.c,{striped:!0,bordered:!0,hover:!0,data:N,noBottomColumns:!0,entries:100}))},w=function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),l=t[0],c=t[1];return Object(n.useEffect)((function(){fetch("https://xhg56111bk.execute-api.eu-west-2.amazonaws.com/prod/attendance/accelerator").then((function(e){return e.json()})).then((function(e){var t=e.items;t=t.map((function(e){return Object(o.a)({},e,{module:JSON.parse(e.module),room:JSON.parse(e.room)})})),localStorage.setItem("sessions",JSON.stringify(t))})).catch((function(e){return console.log(e)}))}),[l]),r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"align-items-center"},r.a.createElement(E.a,null,r.a.createElement(f.a,{src:a(69),width:"150"})),r.a.createElement(E.a,null,r.a.createElement(f.a,{src:a(70),width:"150"}))),r.a.createElement(d.a,{className:"justify-content-end"},r.a.createElement(p.a,{onClick:function(){return c(l+1)}},"Refresh")),r.a.createElement(i.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/sessions",children:r.a.createElement(v,null)}),r.a.createElement(u.b,{path:"/attendance/:id",children:r.a.createElement(N,null)}),r.a.createElement(u.a,{from:"/",to:"/sessions"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(71);c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.1675a710.chunk.js.map